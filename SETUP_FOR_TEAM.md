# הוראות התקנה לשותפים - מערכת ניהול תקלות לוקרים

## דרישות מקדימות
- Python 3.8 ומעלה
- Git

---

## שלבים להתקנה

### 1️⃣ שכפול הפרויקט

```bash
git clone <repository-url>
cd loker-faults-system
```

### 2️⃣ התקנת חבילות Python

```bash
pip install -r requirements.txt
```

**חבילות שמותקנות:**
- streamlit - ממשק המשתמש
- sqlalchemy - ניהול מסדי נתונים
- pandas - עיבוד נתונים
- psycopg2-binary - התחברות ל-PostgreSQL
- python-dotenv - ניהול משתני סביבה

---

### 3️⃣ הגדרת חיבור למסד הנתונים

**צור קובץ `.env` בתיקיית הפרויקט:**

```env
DATABASE_URL=postgresql://team41:xBjwE7X6BjQjARSGTFcWOg7TJ0ZiQbyq@dpg-d615mm24d50c73eh9o0g-a.oregon-postgres.render.com/studentlocker
```

> ⚠️ **חשוב:** קובץ זה מכיל פרטי התחברות ו**לא צריך להעלות אותו לגיט**!  
> הוא כבר מוגדר ב-`.gitignore`

**אפשרויות יצירת הקובץ:**

**אופציה א' - העתקה מתבנית:**
```bash
# Windows PowerShell
Copy-Item .env.example .env

# ואז ערוך את הקובץ .env והחלף את DATABASE_URL בכתובת האמיתית
```

**אופציה ב' - יצירה ידנית:**
1. צור קובץ חדש בשם `.env` (בלי שם לפני הנקודה!)
2. הדבק את השורה מלמעלה
3. שמור

---

### 4️⃣ יצירת נתוני דמו (אופציונלי)

**אם אתה רוצה תקלות לדוגמה לבדיקות:**

```bash
python seed_demo_faults.py
```

הסקריפט ישאל אם למחוק תקלות קודמות - הקלד `y`

**זה יצור:**
- 15 תקלות אקראיות
- קשורות לתלמידים אמיתיים מהמסד
- עם סטטוסים שונים (פתוח, בטיפול, נפתר)

---

### 5️⃣ הרצת האפליקציה

```bash
streamlit run app.py
```

**האפליקציה תיפתח אוטומטית בדפדפן:**
```
http://localhost:8501
```

---

## 📊 מבנה המערכת

### PostgreSQL בענן (Render) - קריאה בלבד ✅
- **תלמידים** - 85 תלמידים
- **כתובת:** Oregon, USA
- **גישה:** כל השותפים משתמשים באותו מסד
- **הרשאות:** קריאה בלבד (Read-Only)

### SQLite מקומי - קריאה וכתיבה ✅
- **תקלות** - נשמר במחשב שלך
- **קובץ:** `faults_system.db`
- **נוצר אוטומטית** בהרצה הראשונה
- **הערה:** כל מפתח רואה רק את התקלות שלו (בינתיים)

---

## 🔧 פתרון בעיות נפוצות

### ❌ "אין חיבור למסד הנתונים"
**פתרון:**
1. בדוק שיש חיבור לאינטרנט
2. ודא שהקובץ `.env` קיים
3. ודא ש-`DATABASE_URL` נכון ללא רווחים

### ❌ "psycopg2 לא מותקן"
**פתרון:**
```bash
pip install psycopg2-binary
```

### ❌ "הטבלאות ריקות / אין תלמידים"
**פתרון:**
המסד בענן כבר מכיל 85 תלמידים. אם אין - פנה למנהל הפרויקט.

### ❌ "Streamlit לא עובד"
**פתרון:**
```bash
# אם streamlit לא מזוהה, נסה:
python -m streamlit run app.py
```

---

## 📁 קבצים חשובים

| קובץ | תיאור |
|------|--------|
| `app.py` | האפליקציה הראשית |
| `seed_demo_faults.py` | יצירת תקלות לדוגמה |
| `.env` | פרטי התחברות (לא בגיט!) |
| `.env.example` | תבנית לדוגמה |
| `faults_system.db` | מסד התקלות המקומי (SQLite) |
| `requirements.txt` | רשימת חבילות |

---

## 🎯 שימוש במערכת

### טאב 1: דיווח תקלה חדשה
1. בחר תלמיד מהרשימה
2. בחר סוג תקלה
3. סמן אם דחוף
4. כתוב תיאור
5. שלח

### טאב 2: צפייה בכל התקלות
- סינון לפי סטטוס / דחיפות / סוג
- סטטיסטיקות
- עדכון סטטוס תקלות
- ניהול תקלות

### טאב 3: רשימת תלמידים
- צפייה בכל התלמידים מהמסד
- חיפוש לפי שם / ת"ז / אימייל
- **קריאה בלבד** - לא ניתן לערוך

---

## 🔄 עדכונים מגיט

כשיש שינויים בפרויקט:

```bash
git pull
pip install -r requirements.txt  # במקרה של חבילות חדשות
streamlit run app.py
```

---

## 💡 טיפים

1. **תקלות מקומיות:** כרגע כל מפתח רואה רק את התקלות שלו. בעתיד נעביר גם את התקלות לענן.

2. **ביצועים:** אם האפליקציה איטית בהתחלה - Render Free יכול להירדם. המתן 10-20 שניות.

3. **שמירת עבודה:** התקלות נשמרות ב-SQLite מקומי. אל תמחק את `faults_system.db`!

4. **גיבוי:** אם תרצה לגבות את התקלות, העתק את `faults_system.db`

---

## 📞 תמיכה

אם יש בעיות:
1. בדוק את הטרמינל לשגיאות
2. נסה להפעיל מחדש את Streamlit
3. ודא ש-`.env` קיים ותקין
4. פנה למנהל הפרויקט

---

**🎉 זהו! תהנה מהעבודה על הפרויקט!**
